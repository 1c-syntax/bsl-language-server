// Тест для проверки очистки mapping при переназначении переменной

Процедура ТестПереназначения()
    
    // Сначала присваиваем ссылку на общий модуль
    МодульДоступа = ОбщегоНазначения.ОбщийМодуль("ПервыйОбщийМодуль");
    МодульДоступа.НеУстаревшаяПроцедура(); // Должно быть найдено
    
    // Теперь переназначаем переменную на обычное значение
    МодульДоступа = Неопределено;
    
    // После переназначения эти вызовы НЕ должны индексироваться как вызовы общего модуля
    // (это будут вызовы на неопределённом значении, что является ошибкой, но это не наша проблема)
    Попытка
        МодульДоступа.НеУстаревшаяФункция(); // НЕ должно индексироваться как вызов общего модуля
    Исключение
    КонецПопытки;
    
КонецПроцедуры

Процедура ТестПереназначенияНаДругойМодуль()
    
    // Присваиваем один модуль
    Модуль = ОбщегоНазначения.ОбщийМодуль("ПервыйОбщийМодуль");
    Модуль.НеУстаревшаяПроцедура(); // Должно индексироваться
    
    // Переназначаем на другой модуль
    Модуль = ОбщегоНазначения.ОбщийМодуль("ГлобальныйСерверныйМодуль");
    // После переназначения старый mapping должен быть очищен
    
КонецПроцедуры
