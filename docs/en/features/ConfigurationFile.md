# BSL Language Server Configuration

BSL Language Server provides the ability to change the settings using a configuration file in json format.  
The created file must be specified using the key `--configuration` *(or `-c`)* when running BSL Language Server as a console application. If you use the editor / IDE with the BSL Language Server client plugin, place it in accordance with the documentation *(this is usually the root of a project or workspace)*.

В случае отсутствия конфигурационного файла будет предпринята попытка найти файл ".bsl-language-server.json" в "%HOMEPATH%"

## Settings

| Name                                                        |            Type            | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
|:----------------------------------------------------------- |:--------------------------:|:---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `language`                                                  |          `String`          | Set the language for displaying diagnosed comments. Supported languages:<br/>* `ru` - for Russian (*default*)<br/>* `en` - for English                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| `codeLens`                                                  |       `JSON-Object`        | Contains the settings for displaying `lens` in advanced code editors/IDEs *(for example, [Visual Studio Code](https://code.visualstudio.com/))*, which displays various information above a block of code. Object properties                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| ⤷&nbsp;&nbsp;&nbsp;`parameters`                             |       `JSON-Object`        | Collection of lens settings. Элементами коллекции являются json-объекты следующей структуры:<br/>* *ключ объекта* - строка, являющаяся идентификатором линзы<br/>* *значение объекта* - может принимать либо булево значение, и тогда интерпретируется как отключение линзы (`false`) или ее включение с параметрами по умолчанию (`true`), либо значение типа `json-объект`, представляющего собой набор настроек линзы.                                                                                                                                                                                                                                  |
| &nbsp;&nbsp;&nbsp;⤷&nbsp;&nbsp;&nbsp;`cognitiveComplexity`  | `Булево` или `JSON-Объект` | Включает отображение значения [когнитивной сложности](../diagnostics/CognitiveComplexity.md) метода над его определением. По умолчанию настройка установлена в `true`. Доступные параметры линзы: `complexityThreshold` - порог, после которого линза начинает срабатывать. Значение параметра по умолчанию - `-1`.                                                                                                                                                                                                                                                                                                                                                    |
| &nbsp;&nbsp;&nbsp;⤷&nbsp;&nbsp;&nbsp;`cyclomaticComplexity` | `Булево` или `JSON-Объект` | Включает отображение значения [цикломатической сложности](../diagnostics/CyclomaticComplexity.md) метода. По умолчанию настройка установлена в `true`. Доступные параметры линзы: `complexityThreshold` - порог, после которого линза начинает срабатывать. Значение параметра по умолчанию - `-1`.                                                                                                                                                                                                                                                                                                                                                                    |
| `diagnostics`                                               |       `JSON-Object`        | Содержит настройки диагностик                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| ⤷&nbsp;&nbsp;&nbsp;`computeTrigger`                         |          `Строка`          | С помощью этого параметра можно указать событие, при котором будет вызвана процедура анализа кода для диагностирования замечаний. Возможные значения:<br/>* `onType` - при редактировании файла (онлайн) ***на больших файлах может ЗНАЧИТЕЛЬНО замедлять редактирование***<br/>* `onSave` - при сохранении файла (*используется по умолчанию*)<br/>* `never` - анализ выполняться не будет                                                                                                                                                                                                                                                          |
| ⤷&nbsp;&nbsp;&nbsp;`ordinaryAppSupport`                     |       `Boolean>`        | Поддержка обычного клиента. Диагностики будут требовать учитывать особенности обычного приложения. Возможные значения:<br/>* `true` - конфигурация разрабатывается с поддержкой обычного клиента *(установлен по умолчанию)* <br/>* `false` - игнорировать предупреждения связанные с особенностями обычного клиента                                                                                                                                                                                                                                                                                                                                       |
| ⤷&nbsp;&nbsp;&nbsp;`skipSupport`                            |          `String`          | Этим параметром настраивается режим пропуска файлов *(т.е. файлы не анализируются на предмет наличия замечаний)* **конфигурации 1С**, находящихся "на поддержке" конфигурации поставщика. Возможные значения:<br/>* `withSupport` - пропускаются все модули, находящиеся "на поддержке" *(все виды "замков")*<br/>* `withSupportLocked` - пропускаются только модули, находящиеся "на поддержке" с запретом изменений *("желтый закрытый замок")*<br/>* `never` - режим поддержки не анализируется и модули не пропускаются *(установлен по умолчанию)*                                                                                              |
| ⤷&nbsp;&nbsp;&nbsp;`mode`                                   |          `Строка`          | Настройка для управления режимом учета настроек диагностик. Возможные варианты:<br/>* `OFF` - Все диагностики считаются выключенными, вне зависимости от их настроек <br/>* `ON` - Все диагностики включенные по умолчанию считаются включенными, остальные - в зависимости от личных настроек <br/>* `EXCEPT` - Все диагностистики, кроме указанных, считаются включенными <br/>* `ONLY` - Только указанные диагностики считаются включенными <br/>* `ALL` - Все диагностики считаются включенными                                                                                                                                      |
| ⤷&nbsp;&nbsp;&nbsp;`parameters`                             |       `JSON-Object`        | Параметр представляет собой коллекцию настроек диагностик. Элементами коллекции являются json-объекты следующей структуры:<br/>* *ключ объекта* - строка, являющаяся ключом диагностики<br/>* *значение объекта* - может принимать либо булево значение, и тогда интерпретируется как отключение диагностики (`false`) или ее включение с параметрами по умолчанию (`true`), либо значение типа `json-объект`, представляющего собой набор настроек диагностики.<br/><br/>Ключ, включена ли по умолчанию, а также описание возможных параметров и примеры для конфигурационного файла представлены на странице с описанием каждой диагностики. |
| `documentLink`                                              |       `JSON-Object`        | Содержит настройки ссылок на документацию                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| ⤷&nbsp;&nbsp;&nbsp;`showDiagnosticDescription`              |         `Boolean`          | Показывать дополнительные ссылки на документацию по диагностикам. By default, the parameter is off (*set to `false`*)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| `useDevSite`                                                |          `Булево`          | При включении настройки формирующиеся ссылки на документацию будут вести на develop-версию сайта. По умолчанию параметр выключен (*установлен в `false`*)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| `siteRoot`                                                  |          `String`          | Путь к корню сайта с документацией. По умолчанию параметр имеет значение `"https://1c-syntax.github.io/bsl-language-server"`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| `traceLog`                                                  |          `String`          | Для логирования всех запросов *(входящих и исходящих)* между **BSL Language Server** и **Language Client** из используемого редактора/IDE, в этом параметре можно указать путь к файлу лога. Путь можно указывать как абсолютный, так и относительный *(от корня анализируемого проекта)*, по умолчанию значение не заполнено.<br/><br/>**ВНИМАНИЕ**<br/><br/>* При запуске **BSL Language Server** перезаписывает указанный файл<br/>* Скорость взаимодействия между клиентом и сервером **ЗНАЧИТЕЛЬНО ЗАМЕДЛЯЕТСЯ**                                                                                                                    |
| `configurationRoot`                                         |          `Строка`          | Данный параметр предназначен для указания корневого каталога, в котором находятся файлы конфигурации 1С в каталоге проекта. Может быть полезен в случае нахождения нескольких каталогов конфигураций в одном каталоге проекта либо при сложной структуре каталога проекта. По умолчанию параметр не заполнен и `BSL Language Server` самостоятельно определяет расположение корневого каталога конфигурации                                                                                                                                                                                                                                                            |

Для облегчения составления и редактирования конфигурационного файла можно использовать следующую JSON-схему:

```log
https://1c-syntax.github.io/bsl-language-server/configuration/schema.json
```

## Example

Ниже приведен пример настройки:

* Language of diagnostics messages - English;
* Changes the diagnostic setting for [LineLength - Line Length limit](../diagnostics/LineLength.md), set the limit for the length of a string to 140 characters;
* Disable [MethodSize - Method size restriction diagnostic](../diagnostics/MethodSize.md).
* Enables the calculation of diagnostics in continuous mode (`computeTrigger = onType`)

```json
{
  "$schema": "https://1c-syntax.github.io/bsl-language-server/configuration/schema.json",
  "language": "en",
  "diagnostics": {
    "computeTrigger": "onType",
    "parameters": {
      "LineLength": {
        "maxLineLength": 140
      },
      "MethodSize": false
    }
  }
}
```
