# Опечатка (Typo)

<!-- Блоки выше заполняются автоматически, не трогать -->
## Описание диагностики
<!-- Описание диагностики заполняется вручную. Необходимо понятным языком описать смысл и схему работу -->
Проверка орфографических ошибок осуществляется с помощью [LanguageTool](https://languagetool.org/ru/). Проверяемые строки разбиваются по camelCase 
и проверяются на соответствие во встроенном словаре.

## Кэш
Диагностика использует персистентный кэш на диске (EhCache) для хранения информации об уже проверенных словах. Путь к каталогу кэша задаётся свойством `app.cache.path` в конфигурации приложения.

По умолчанию в приложении установлено:

```properties
app.cache.path=.bsl-ls-cache
```

Это означает, что кэш будет создаваться в каталоге `.bsl-ls-cache` относительно рабочей директории приложения (можно переопределить через переменные окружения или аргументы командной строки).

Рекомендации для CI: кэшируйте или переносите этот каталог между сборками, чтобы избежать повторной персистентной инвалидации и ускорить проверки. Ниже — примеры подходов для популярных CI-платформ.

- GitHub Actions
  - Используйте `actions/cache` для сохранения каталога (`.bsl-ls-cache` или путь, заданный в `app.cache.path`) между прогоном сборок и тестов.

- GitLab CI
  - В `.gitlab-ci.yml` используйте секцию `cache`:

    ```yaml
    cache:
      key: "bsl-ls-typo-cache"
      paths:
        - .bsl-ls-cache/
      policy: pull-push
    ```

  - При необходимости задайте уникальный `key` для разных веток/раннеров.

- Jenkins
  - В pipeline можно сохранить каталог кэша между сборками несколькими способами:
    - Использовать `stash`/`unstash` для передачи данных между этапами в одной сборке.
    - Использовать плагин `Workspace Cleanup` и настроить сохранение workspace на агенте (если агенты постоянные) или архивировать артефакт с помощью `archiveArtifacts` и скачивать при следующих сборках.
    - Для Jenkins при использовании динамических агентов (например, Kubernetes) рекомендуется сохранять кэш в сетевом хранилище или в объектном хранилище (S3) и восстанавливать его в начале job.

Общие рекомендации:
- Убедитесь, что путь, указанный в `app.cache.path`, доступен процессу сборки и имеет достаточные права.

## Источники
<!-- Необходимо указывать ссылки на все источники, из которых почерпнута информация для создания диагностики -->

* Полезная информация: [Русский язык для всех](http://gramota.ru/)
* [Страница LanguageTool](https://languagetool.org/ru/)
